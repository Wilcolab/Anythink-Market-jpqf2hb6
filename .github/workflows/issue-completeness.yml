name: Issue Completeness

on:
  issues:
    types: [opened]  # Trigger when an issue is opened

jobs:
  analyze-issue:
    runs-on: ubuntu-latest  # Specify the environment

    steps:
      - name: AI Inference
        id: ai-response
        uses: actions/ai-inference@v2
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          max-tokens: 1000
          system-prompt: |
            You are a GitHub issue assistant. Analyze issues for completeness.
            Provide helpful suggestions and identify missing information.
          prompt: |
            Issue by ${{ github.event.issue.user.login }}
            Title: ${{ github.event.issue.title }}
            Body: ${{ github.event.issue.body }}

      - name: Comment results on the issue
        uses: peter-evans/create-or-update-comment@v4
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          issue-number: ${{ github.event.issue.number }}
          body: ${{ steps.ai-response.outputs.response }}
